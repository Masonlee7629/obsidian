태그: #정보처리기사 
연결문서: [통합 구현 6](통합%20구현%206.md)

# 연계 장애 및 오류 처리 구현

## 01. 연계 메커니즘 구간별 장애

### 1) 연계 메커니즘의 구성도에서 오류가 발생하는 구간
1. 송신 시스템의 오류 발생 구간
    - 연계 데이터를 생성 및 추출하는 과정에서 발생
    - 코드 매핑 및 데이터 전환 시 발생
    - 인터페이스 테이블 등록 시 발생
    - 별도로 구현한 연계 응용 프로그램에서 정의한 로그 및 오류 로그 테이블에 오류 정보를 기록함
    - 인터페이스 테이블의 일부를 사용하여 오류 정보를 기록함
2. 전송 오류의 발생 구간
    - 송신 시스템 인터페이스 테이블의 연계 데이터 로드 및 전송 형식으로 변환 시 발생
    - 데이터가 실제 송수신되는 과정에서 발생
    - 연계 서버 또는 송신 어댑터를 통해 송신될 때 발생
    - 수신 어댑터를 통해 수신될 때 발생
    - 전송 형식을 수신 시스템 인터페이스 테이블의 형식으로 변환 및 로드 시 발생
    - 연계 서버 혹은 중계 서버에서 설정된 로그 및 오류 로그 테이블에 오류 정보를 기록함
3. 수신 시스템의 오류 발생 구간
    - 인터페이스 테이블의 연계 데이터 로드 시 발생
    - 코드 매핑 및 데이터 변환 시 발생
    - 운영 데이터베이스에 반영하는 과정에서 발생
    - 별도로 구현한 연계 프로그램에서 정의한 로그 및 오류 로그 테이블에 오류 정보를 기록함
    - 인터페이스 테이블의 일부를 사용하여 오류 정보를 기록함
    
<br>

---

<br>

## 02. 장애 및 오류 유형과 처리 방안

### 1) 장애 및 오류 유형
1. 연계 시스템의 오류
    - 연계 서버의 실행 여부를 비롯하여 송수신, 전송 형식 변환 등 서버의 기능과 관련된 장애 및 오류
    - 연계 서버가 미 가동하는 경우
    - 송수신 시스템의 IP 주소 및 Port의 접속이 안 되는 경우
    - 연계 서버의 로그를 확인하여 원인을 분석하여 복구함
2. 송신 시스템의 연계 프로그램 오류
    - 운영 데이터베이스에서 연계 데이터를 생성 및 추출, 코드 및 데이터 변환 등을 수행하도록 별도로 구현한 응용 프로그램에서의 오류
    - 데이터 추출을 위한 데이터베이스 접근 시 권한이 불충분한 경우
    - 데이터 변환 시 익셉션을 처리하지 않은 경우
    - 등록되지 않은 코드가 매핑되는 경우
3. 수신 시스템의 연계 프로그램 오류
    - 데이터베이스의 접근 권한이 불충분한 경우
    - 데이터 변환 및 반영 시 익셉션을 처리하지 않은 경우
    - 등록되지 않은 데이터를 수정할 경우
    - 수신 시스템은 물론 송신 시스템 연계 프로그램에서 기록하는 로그를 확인하여 원인 분석 및 조치를 취해야 함
4. 연계 데이터 자체의 오류
    - 송신 시스템에서 추출된 연계 데이터가 유효하지 않은 경우
    - 연계 일자가 유효하지 않은 경우
    - 송신 시스템 연계 프로그램에서 기록하는 로그를 확인하여 데이터를 보정한 후 재전송함

<br>

### 2) 장애 및 오류 처리 방안
- 연계 서버에서 기록하는 로그와 송수신 시스템의 연계 프로그램에서 기록하는 로그를 확인함
- 로그에서 상세 오류 원인을 분석한 후 분석 결과에 따른 해결 방안을 결정함
- 연계 서버의 정상적 실행 여부를 확인함
- 연계 데이터의 전송 형식으로의 변환 과정을 확인함
- 송수신 대상 시스템의 정상적 연결 여부를 확인함
- 송수신 시스템의 IP 주소 및 Port 접근 가능 여부를 확인함
- 인터페이스 테이블 접근 권한을 확인함

<br>

---

<br>

## 03. 장애 및 오류의 정의와 설계

### 1) 장애 및 오류 관리 범위
- 연계 서버의 실행 여부로 범위가 정해짐
- 네트워크 접근 가능 여부로 범위가 정해짐
- 송수신 폴더 및 테이블의 권한 여부로 범위가 정해짐
- 장애 및 오류를 기록하고 관리하는 방식의 설계는 송수신 시스템의 연계 응용 프로그램에 의한 관리 대상 장애 및 오류 범위로 한정함

<br>

### 2) 장애 및 오류 코드와 메시지 정의
- 송신 시스템에서 운영 데이터베이스로부터 연계 데이터를 추출
- 추출한 데이터에서 코드 및 데이터를 다른 형식으로 전환하여 인터페이스 테이블에 등록하는 과정에서 발생 가능한 오류를 정의
- 식별한 오류 내용을 주제별로 분류하여 오류 내용에 코드를 부여
- 오류 코드는 규칙에 따라 부여함
- 오류 내용은 이해하기 용이하도록 보완하여 작성

<br>

### 3) 오류 코드 및 메시지 관리 방식
1. 테이블 관리 유형
    - 검색 및 참조, 생성 등 관리가 용이함
    - 관리 대상 오류 코드 및 메시지가 많을 경우에 성능이 우수함
    - 데이터베이스 접근이 가능할 경우만 사용 가능
2. 파일 관리 유형
    - 관리 대상 오류 코드 및 메시지가 적을 경우에 사용
    - 데이터베이스에 접근할 수 있을 경우에도 사용함

<br>

### 4) 오류 코드 부여 규칙

| &nbsp;&nbsp;ⓐ&nbsp;&nbsp; | &nbsp;&nbsp;ⓑ&nbsp;&nbsp; | &nbsp;&nbsp;ⓒ&nbsp;&nbsp; | &nbsp;&nbsp;ⓓ&nbsp;&nbsp; |
|:-:|:-:|:-:|:-:|
| &nbsp;&nbsp;1자리&nbsp;&nbsp; | &nbsp;&nbsp;1자리&nbsp;&nbsp; | &nbsp;&nbsp;1자리&nbsp;&nbsp; | &nbsp;&nbsp;3자리&nbsp;&nbsp; |

- ⓐ : 장애 및 오류가 있으면 E, 없으면 오류 코드 자체를 사용하지 않으므로 필요 없음
- ⓑ : 오류 발생 위치가 연계 서버이면 S, 연계 프로그램이면 A로 함
- ⓒ : 오류 유형이 데이터 구조 오류이면 F, 데이터 길이 오류이면 L로 함
- ⓓ : 오류 유형 및 분류를 일련 번호를 000 ~ 999까지 부여함
- 오류 코드가 EAL001이면, E(오류 발생), A(연계 프로그램), L(데이터 길이 오류), 001(데이터 길이가 너무 길다)라고 분석할 수 있음

<br>

### 5) 오류 로그 테이블 설계
1. 오류 로그 테이블 설계 방식
    - 오류 로그 테이블은 기록 단위에 따라 인터페이스 테이블에 대한 로그와 연계 데이터에 대한 로그로 설계할 수 있음
    - 오류 로그 테이블은 연계 메커니즘 송수신 과정의 전반적인 진행 상황을 모니터링 하기 위한 로그를 기록하는 테이블과 분리하거나 통합하여 설계할 수 있음
2. 오류 로그 테이블의 관리 정보
    - 오류 데이터를 추적함
    - 오류 원인을 정확하게 분석함
    - 분석 결과에 따라 보완 후 재처리할 수 있도록 관련 정보를 관리함
3. 오류 로그 테이블의 필수적 관리 및 설계 정보
    - 오류 발생한 데이터가 포함된 행의 주 식별자(Primary Key)
    - 오류가 발생한 필드(속성)
    - 오류 코드
    - 오류 내용
    - 오류 발생 일시
    - 연계 데이터의 담당자 정보
    - 재작업이나 오류 발생의 선후 관계
    - 시간적 순서의 추적을 용이하게 하기 위한 부가적인 정보
4. 오류 로그 테이블의 설계 항목 및 방법
    - 오류 로그 테이블 설계 시 상세 항목은 송신 일시, 수신 일시, 처리 일시, 처리 상태, 오류 코드, 오류 내용
    - 오류 로그 테이블 설계 결과 산출물은 테이블 정의서 또는 파일 레이아웃 정의서를 활용하여 작성함

<br>

---

<br>

## 04. 가용성 향상을 위한 이중화

### 1) Active-Active 방식
- 두 개의 웹 응용 서버(WAS)가 동시에 서비스를 제공하는 방식
- 한 서버에 장애가 발생하는 경우 다른 서버를 통해 서비스를 연속적으로 제공함

<br>

### 2) Active-Standby 방식
- 두 개의 웹 응용 서버(WAS) 중의 하나는 서비스를 제공하고, 나머지는 대기함
- 장애가 발생하는 경우 다른 웹 응용 서버로 서비스를 변경하여 연속적인 서비스를 제공함

<br>

---

<br>

## 05. 재해 복구 시스템(DRS, Disaster Recovery System)

### 1) 미러 사이트(Mirror Site)
- 전산센터와 동일한 수준의 정보 기술 자원을 원격지에 구축하여 두고 전산센터와 재해복구센터 모두 액티브 상태로 실시간으로 동시에 서비스하는 방식
- 재해 발생 시 RTO 없이 즉시 이루어짐(이론적으로는 0)
    - RTO(Recovery Time Objective, 복구 목표 시간)
        - 서비스 중단 시, 복구하기까지 서비스가 중단될 수 있는 최대 허용 시간
- 두 개의 전산센터를 구축해야 하므로 초기 투자 및 유지보수에 높은 비용이 소요됨
- 웹 응용 서비스 등 데이터의 갱신 빈도가 높지 않은 전산센터에 적용할 수 있음
- 데이터베이스의 응용 서비스 등 데이터의 갱신 빈도가 높은 전산센터의 경우 양쪽의 사이트에서 동시에 서비스를 제공하게 하는 것은 시스템의 높은 부하를 초래하여 실용적이지 않음

<br>

### 2) 핫 사이트(Hot Site)
- 전산센터와 동일한 수준의 정보 기술 자원을 대기 상태로 원격지 사이트에 보유하면서, 동기적 또는 비동기적 방식의 실시간 미러링을 통하여 데이터를 최신의 상태로 유지하고 있다가, 전산센터 재해 시 재해복구센터의 정보 시스템을 액티브로 전환하여 서비스하는 방식
- 재난 발생으로 영향을 받는 업무 기능을 즉시 복구할 수 있도록 전산센터와 동일한 모든 설비와 자원을 보유하고 있는 거의 완전한 시설로서 수 시간 안에 가동이 이루어질 수 있음
- 재해 발생 시 RTO는 수시간(약 4시간 이내)
- 초기 투자 및 유지보수에 높은 비용이 소요됨
- 데이터베이스 응용 데이터의 갱신 빈도가 높은 시스템의 경우에 주로 이용되는 방식

<br>

### 3) 웜 사이트(Warm Site)
- 재해복구센터에 전산센터와 동일한 수준의 정보 기술 자원을 보유하는 대신, 중요성이 높은 정보 기술 자원만 부분적으로 재해복구센터에 보유하는 방식
- 실시간으로 수행하지 않으며, 데이터의 백업 주기가 수시간 ~ 1일 정도로 핫 사이트에 비해 다소 김
- 재해 발생 시 RTO는 수일 ~ 수주
- 초기 투자 및 유지비용이 미러사이트 및 핫 사이트에 비해 저렴하나, 초기의 복구 수준이 완전하지 않을 수 있으며, 완전한 복구까지는 다소의 시일이 소요됨

<br>

### 4) 콜드 사이트(Cold Site)
- 데이터만 원격지에 보관하고, 최소한의 정보 기술 자원을 확보하고 있다가, 재해 시 데이터를 근간으로 필요한 정보 자원을 조달하여 정보 시스템을 복구하는 방식
- 재해 발생 시 RTO는 수주 ~ 수개원
- 초기 투자 및 유지비용이 가장 저렴하여, RTO가 매우 길고, 복구의 신뢰성이 낮음